# Stratum Mining Server Configuration

server:
  # TCP server settings
  host: "0.0.0.0"
  port: 3333
  max_connections: 10000
  read_timeout: 300s
  write_timeout: 60s
  
  # TLS configuration (optional)
  tls:
    enabled: false
    cert_file: "/etc/stratum/server.crt"
    key_file: "/etc/stratum/server.key"
  
  # Metrics server
  metrics:
    enabled: true
    port: 9090

mining:
  # Pool settings
  pool_address: "your-pool-address-here"
  coin_type: "bitcoin"
  
  # Difficulty settings
  initial_difficulty: 1.0
  min_difficulty: 0.001
  max_difficulty: 1000000.0
  target_share_time: 10s
  retarget_time: 90s
  variance_percent: 30
  
  # Job settings
  job_timeout: 120s
  stale_job_threshold: 3
  
  # Extranonce settings
  extranonce1_size: 4
  extranonce2_size: 4

redis:
  host: "host.docker.internal"
  port: 6379
  password: ""
  db: 0
  pool_size: 100
  
  # Key prefixes
  key_prefix: "stratum:"
  share_ttl: 3600s
  worker_ttl: 300s

postgres:
  host: "host.docker.internal"
  port: 5432
  database: "viddhana_pool"
  user: "viddhana"
  password: "viddhana_secret_2024"
  max_connections: 50
  min_connections: 10
  
  # Connection settings
  connect_timeout: 10s
  statement_timeout: 30s

logging:
  level: "info"  # debug, info, warn, error
  format: "json" # json, console
  output: "stdout" # stdout, file
  file_path: "/var/log/stratum/stratum.log"

# Node RPC settings (for block template)
node:
  rpc_url: "http://localhost:8332"
  rpc_user: "rpcuser"
  rpc_password: "rpcpassword"
  poll_interval: 1s
