# =============================================================================
# Viddhana Pool - Kubernetes Secrets Template
# IMPORTANT: Replace placeholder values before applying
# Consider using sealed-secrets or external-secrets for production
# =============================================================================
apiVersion: v1
kind: Secret
metadata:
  name: viddhana-secrets
  namespace: viddhana-pool
  labels:
    app.kubernetes.io/name: viddhana-pool
    app.kubernetes.io/component: secrets
type: Opaque
stringData:
  # ==========================================================================
  # Database Credentials
  # ==========================================================================
  postgres-user: "viddhana"
  postgres-password: "CHANGE_ME_POSTGRES_PASSWORD"
  
  # Full database URL (used by API and AI services)
  database-url: "postgresql://viddhana:CHANGE_ME_POSTGRES_PASSWORD@postgres:5432/viddhana_pool?schema=public"
  
  # ==========================================================================
  # Redis Credentials
  # ==========================================================================
  redis-password: "CHANGE_ME_REDIS_PASSWORD"
  redis-url: "redis://:CHANGE_ME_REDIS_PASSWORD@redis:6379"
  
  # ==========================================================================
  # JWT Configuration
  # ==========================================================================
  # Generate with: openssl rand -base64 64
  jwt-secret: "CHANGE_ME_JWT_SECRET_64_BYTES_BASE64_ENCODED"
  
  # ==========================================================================
  # Blockchain Configuration
  # ==========================================================================
  # Pool wallet private key (NEVER commit real private keys)
  pool-wallet-private-key: "CHANGE_ME_POOL_WALLET_PRIVATE_KEY"
  pool-wallet-address: "0xYOUR_POOL_WALLET_ADDRESS"
  
  # Ethereum RPC URL (use your own node or provider)
  ethereum-rpc-url: "https://eth-mainnet.g.alchemy.com/v2/YOUR_API_KEY"
  
  # ==========================================================================
  # AI Service Keys (Optional)
  # ==========================================================================
  openai-api-key: ""
  anthropic-api-key: ""
  
  # ==========================================================================
  # Monitoring (Optional)
  # ==========================================================================
  grafana-admin-password: "CHANGE_ME_GRAFANA_PASSWORD"
  alertmanager-slack-webhook: ""

---
# Docker Registry Secret (for private images)
apiVersion: v1
kind: Secret
metadata:
  name: docker-registry-secret
  namespace: viddhana-pool
  labels:
    app.kubernetes.io/name: viddhana-pool
    app.kubernetes.io/component: secrets
type: kubernetes.io/dockerconfigjson
data:
  # Generate with: kubectl create secret docker-registry --dry-run=client -o yaml
  .dockerconfigjson: eyJhdXRocyI6e319

---
# TLS Certificate Secret (for ingress)
# Replace with your actual certificate or use cert-manager
apiVersion: v1
kind: Secret
metadata:
  name: viddhana-tls
  namespace: viddhana-pool
  labels:
    app.kubernetes.io/name: viddhana-pool
    app.kubernetes.io/component: secrets
type: kubernetes.io/tls
data:
  # Base64 encoded TLS certificate
  tls.crt: ""
  # Base64 encoded TLS private key
  tls.key: ""

---
# Sealed Secrets Example (recommended for GitOps)
# Install sealed-secrets controller and use kubeseal to encrypt secrets
# apiVersion: bitnami.com/v1alpha1
# kind: SealedSecret
# metadata:
#   name: viddhana-sealed-secrets
#   namespace: viddhana-pool
# spec:
#   encryptedData:
#     postgres-password: AgBy3i4OJSWK+PiTySYZZA9rO43cGDEq...
#     jwt-secret: AgBy3i4OJSWK+PiTySYZZA9rO43cGDEq...

---
# External Secrets Example (for AWS Secrets Manager, Vault, etc.)
# Requires external-secrets operator
# apiVersion: external-secrets.io/v1beta1
# kind: ExternalSecret
# metadata:
#   name: viddhana-external-secrets
#   namespace: viddhana-pool
# spec:
#   refreshInterval: 1h
#   secretStoreRef:
#     kind: ClusterSecretStore
#     name: aws-secrets-manager
#   target:
#     name: viddhana-secrets
#     creationPolicy: Owner
#   data:
#     - secretKey: postgres-password
#       remoteRef:
#         key: viddhana/production/database
#         property: password
#     - secretKey: jwt-secret
#       remoteRef:
#         key: viddhana/production/jwt
#         property: secret
